<!DOCTYPE html>

<html lang="en">
<meta charset="utf-8"/>
<head>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- favicon (relative path, no leading slash) -->
<link href="images/logo.png" rel="icon" type="image/png"/>
<!-- fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans&amp;family=Tilt+Warp&amp;display=swap" rel="stylesheet"/>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-65LTDNTZ16"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-65LTDNTZ16');
</script>
<link rel="stylesheet" href="about.css"/>
<link rel="stylesheet" href="nav.css"/>
<link rel="stylesheet" href="footer.css"/>
</head>
<body>
<!-- NAV -->
<header class="top-bar sca-nav" role="navigation">
  <a class="logo-link" href="index.html" aria-label="Home">
    <div class="logo"></div>
  </a>

  <nav id="site-nav" aria-label="Primary">
    <a href="about.html">ABOUT</a>
    <a href="vex.html">VEX</a>
    <a href="projects.html">PROJECTS</a>
    <a href="support.html">SUPPORT</a>
  </nav>
</header>

<!-- MISSION SECTION -->
<section class="mission-section">
<img alt="" class="mission-gif" src="images/mission.gif"/>
<div class="mission-copy">
<h1>OUR MISSION</h1>
<div class="mission-line" style="height:6px;background-image:linear-gradient(90deg,rgba(249,203,34,.9) 0%,rgba(239,118,22,.9) 50%,rgba(240,17,95,.9) 100%);border-radius:3px;margin:20px 0;"></div>
<p>
        Founded by student competitors and alumni of the VEX Robotics program, our nonprofit alliance supports schools and robotics teams by providing knowledge-sharing resources, educational videos, and essential funding for our community across VEXU, V5RC, and several other programs. We are dedicated to building a stronger, more inviting community for students one team at a time.
      </p>
<div class="btn-row">
<a class="btn-img" href="vex.html"><img alt="WhatsVEX" src="images/Whatsvex.png"/></a>
<a class="btn-outline hover-scale" href="support.html">Donate Now →</a>
</div>
</div>
</section>
<!-- Integrated Approach -->
<div class="integrated-bar meet-bar partnerships-banner" style="display:flex;justify-content:center;align-items:center;">
<h2>TRIANGULAR TIES</h2>
</div>
<div class="integrated-approach">
<div class="background-effects"></div>
<div class="bg-split">
<div class="bg-split__half bg-split__left"></div>
<div class="bg-split__half bg-split__right"></div>
</div>
<div class="triangle-container" style="margin:5rem auto; position:relative; text-align:center; font-family:sans-serif; height:800px;">
<!-- SVG Triangle -->
<svg style="width:100%; height:auto;" viewbox="0 0 300 240">
<defs>
<lineargradient id="triangleStrokeGradient" x1="0" x2="0" y1="0" y2="1">
<stop offset="0%" stop-color="#F9CB22"></stop>
<stop offset="50%" stop-color="#EF7616"></stop>
<stop offset="100%" stop-color="#F0115F"></stop>
</lineargradient>
</defs>
<polygon fill="none" points="150,20 40,200 260,200" stroke="url(#triangleStrokeGradient)" stroke-linejoin="round" stroke-width="6"></polygon>
</svg>
<img alt="Logo" class="triangle-logo" src="images/highstakes.png"/>
<!-- Labels -->
<div id="labels" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;">
<div class="label"><div class="label-text">NONPROFIT</div></div>
<div class="label"><div class="label-text">VEXU<br class="br-sm"/>TEAM</div></div>
<div class="label"><div class="label-text">SOCAL<br class="br-sm"/>ALLIANCE</div></div>
</div>
<!-- Descriptions -->
<div class="description-text" id="description-left"></div>
<div class="description-text" id="description-right"></div>
<!-- Arrows -->
<div id="arrow-container">
<div class="arrow" data-dir="-1"></div>
<div class="arrow" data-dir="1"></div>
</div>
</div>
</div>
<script>
      const logoEl   = document.querySelector('.triangle-logo');
  let   logoAngle = 0;
    /* Roles / copy */
    const roles = [
      
      {
        label: "NONPROFIT",
        descriptions: {
          VEXU_TEAM: "Provides funding and resources to the VEXU team, enabling them to compete and innovate.",
          SOCAL_ALLIANCE: "Acts as the fiscal sponsor for the SoCal Alliance, handling donations and financial oversight."
        }
      },
      {
        label: "VEXU TEAM",
        descriptions: {
          NONPROFIT: "Team members volunteer and provide expertise to support the nonprofit's outreach programs.",
          SOCAL_ALLIANCE: "Serves as a model team and contributes to the Alliance's knowledge base and community events."
        }
      },
      {
        label: "SOCAL ALLIANCE",
        descriptions: {
          NONPROFIT: "Organizes fundraising events and connects the nonprofit with potential sponsors and partners.",
          VEXU_TEAM: "Offers mentorship, shared resources, and a collaborative community for the VEXU team."
        }
      }
      
    ];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }



    // Desktop coordinates for triangle motion
    const positions = [
      { x: 450, y: -5 },   // Top
      { x: -40, y: 640 },  // Bottom-left
      { x: 940, y: 640 }   // Bottom-right
    ];

    let rotation = 0, isAnimating = false;
    const labelEls = document.querySelectorAll("#labels .label");
    const descriptionLeftEl = document.getElementById("description-left");
    const descriptionRightEl = document.getElementById("description-right");
    const arrowContainer = document.getElementById("arrow-container");

    function updateArrowGap(){
      const topRoleIndex = (3 - rotation) % 3;
      arrowContainer.style.gap = roles[topRoleIndex].label === "SOCAL ALLIANCE" ? "24rem" : "16.5rem";
    }

    const circumcircle = (function(points){
      const [p1,p2,p3] = points;
      const d = 2*(p1.x*(p2.y-p3.y)+p2.x*(p3.y-p1.y)+p3.x*(p1.y-p2.y));
      if (Math.abs(d) < 1e-6) return null;
      const ux = ((p1.x*p1.x+p1.y*p1.y)*(p2.y-p3.y) + (p2.x*p2.x+p2.y*p2.y)*(p3.y-p1.y) + (p3.x*p3.x+p3.y*p3.y)*(p1.y-p2.y)) / d;
      const uy = ((p1.x*p1.x+p1.y*p1.y)*(p3.x-p2.x) + (p2.x*p2.x+p2.y*p2.y)*(p1.x-p3.x) + (p3.x*p3.x+p3.y*p3.y)*(p2.x-p1.x)) / d;
      const center = { x: ux, y: uy };
      const radius = Math.hypot(center.x - p1.x, center.y - p1.y);
      return { center, radius };
    })(positions);

    function getAngle(p){ return Math.atan2(p.y - circumcircle.center.y, p.x - circumcircle.center.x); }
    function easeInOutCubic(t){ return t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t + 2, 3)/2; }

    function updateDescriptions(){
      updateBackgrounds();
      const top = (3 - rotation) % 3, left = (4 - rotation) % 3, right = (5 - rotation) % 3;
      const topRole = roles[top], leftRole = roles[left], rightRole = roles[right];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

 const leftKey = leftRole.label.replace(" ","_");
      const rightKey = rightRole.label.replace(" ","_");

      descriptionLeftEl.textContent = topRole.descriptions[leftKey];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

 descriptionRightEl.textContent = topRole.descriptions[rightKey];

      const leftVertex = positions[1], rightVertex = positions[2];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

 // Adjusted positioning to give more space
      Object.assign(descriptionLeftEl.style, { 
        left: (leftVertex.x - 50) + "px",  // moved more left
        top: (leftVertex.y - 380) + "px",
        width: "350px", 
        textAlign: "left" 
      });
      Object.assign(descriptionRightEl.style, { 
        left: (rightVertex.x - 225) + "px", // moved more right
        top: (rightVertex.y - 380) + "px",
        width: "350px", 
        textAlign: "right" 
      });
    }

    

    function animateRotation(direction){
      if (isAnimating || !circumcircle) return;
      isAnimating = true;
      const ANIM_DURATION = 800;
      try {
        // Invert so: right arrow (1) => clockwise; left arrow (-1) => counter-clockwise
        const dir = -direction;
        const stepAngle = 120; // 360/3
        logoAngle -= dir * stepAngle;
        logoEl.style.transform = `translate(-50%, -35%) rotate(${logoAngle}deg)`;

        // Only fade on mobile
        if (window.matchMedia('(max-width: 1122px)').matches) {
          if (typeof window.mobileFadeOut === 'function') window.mobileFadeOut();
        }

        const from = rotation;
        const to   = (rotation + dir + 3) % 3;
        const start = performance.now();
        const duration = ANIM_DURATION;

        const params = Array.from(labelEls).map((_, i) => {
          const startPos = positions[(i + from) % 3];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

     const endPos   = positions[(i + to)   % 3];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

     const a0 = getAngle(startPos);
          let a1   = getAngle(endPos);
          let d    = a1 - a0;
          // Choose the arc in the intended direction
          if (dir > 0) { if (d > 0) d -= 2*Math.PI; }
          else         { if (d < 0) d += 2*Math.PI; }
          return { a0, d };
        });

        const gapChangeDelay = duration * 0.2;
        let gapChanged = false;

        function step(ts){
          const t = Math.min((ts - start) / duration, 1);
          const e = easeInOutCubic(t);

          labelEls.forEach((el,i)=>{
            const { a0, d } = params[i];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

       const ang = a0 + d * e;
            const x = circumcircle.center.x + circumcircle.radius * Math.cos(ang);
            const y = circumcircle.center.y + circumcircle.radius * Math.sin(ang);
            el.style.left = x + "px";
            el.style.top  = y + "px";
          });

          if (!gapChanged && (ts - start) >= gapChangeDelay){
            rotation = to;
            updateArrowGap();
            gapChanged = true;
          }

          if (t < 1) requestAnimationFrame(step);
          else {
            rotation = to;
            updateDescriptions();
            if (window.matchMedia('(max-width: 1122px)').matches) {
              if (typeof window.updateMobileTexts === 'function') window.updateMobileTexts();
              if (typeof window.mobileFadeIn === 'function') window.mobileFadeIn();
            }
            isAnimating = false;
          }
        }
        requestAnimationFrame(step);
      } catch (err) {
        console.error('animateRotation error', err);
        isAnimating = false;
      } finally {
        // Safety timeout in case animation path is interrupted
        setTimeout(() => { isAnimating = false; }, ANIM_DURATION + 150);
      }
    }

    function initialize(){
      labelEls.forEach((el,i)=>{ 
        const raw = roles[i].label;
        const html =
          raw === 'VEXU TEAM'        ? 'VEXU<br class="stack"/>TEAM' :
          raw === 'SOCAL ALLIANCE'   ? 'SOCAL<br class="stack"/>ALLIANCE' :
                                      raw;

        el.querySelector('.label-text').innerHTML = html;
        const pos = positions[(i+rotation)%3]; 
        el.style.left = pos.x + "px"; 
        el.style.top = pos.y + "px"; 
      });
      updateDescriptions();
      updateBackgrounds();
      
      // Initialize logo rotation state
      logoAngle = 0;
      logoEl.style.transform = `translate(-50%, -35%) rotate(${logoAngle}deg)`;
      
      // Enhanced desktop arrows with accessibility
      document.querySelectorAll(".arrow").forEach(a => {
        a.setAttribute('type', 'button');
        a.setAttribute('title', a.dataset.dir === '1' ? 'Next triangle view' : 'Previous triangle view');
        a.setAttribute('aria-label', a.dataset.dir === '1' ? 
          'Navigate to next triangle relationship' : 
          'Navigate to previous triangle relationship');
        
        a.addEventListener("click", (ev) => { ev.preventDefault(); ev.stopPropagation(); animateRotation(parseInt(a.dataset.dir,10)); });
        
        // Keyboard support
        a.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            animateRotation(parseInt(this.dataset.dir,10));
          }
        });
      });
    }
    initialize();
  </script>
<!-- Decorative gradient bars -->
<!-- Removed extra thick separator bar for visual consistency -->
<!-- Meet the Team -->
<div class="integrated-bar meet-bar partnerships-banner" style="display:flex;justify-content:center;align-items:center;">
<h2>MEET THE TEAM</h2>
</div>
<div class="team-container">
<!-- (team items unchanged) -->
<div class="team-item">
<div class="gradient-line" style="width:596px; left:553px; top:99px;"></div>
<div class="gradient-line" style="width:480px; left:669px; top:339px;"></div>
<div class="portrait" style="left:104px; top:57px; background-image:url('images/WILLIAMHO.png');"></div>
<div class="name" style="left:314px; top:68px;">WILLIAM HO</div>
<div class="role" style="left:314px; top:117px; width:835px;">
<div class="role-title">President</div>
<div class="role-text">William, SCA's founder and president, has formally competed in Vex Robotics since 2016. Outside of VEX, he studies Robotics Engineering at UCR, and enjoys 3D modeling, designing, and mountain biking.</div>
</div>
</div>
<div class="team-item">
<div class="gradient-line" style="width:583px; left:566px; top:589px; transform:matrix(1,0,0,-1,0,0);"></div>
<div class="portrait" style="left:148px; top:318px; background-image:url('images/ALLENSUAREZ.png'); transform:rotate(-0.15deg);"></div>
<div class="name" style="left:394px; top:318px;">ALLEN SUAREZ</div>
<div class="role" style="left:394px; top:367px; width:755px;">
<div class="role-title">Vice President</div>
<div class="role-text">Allen is working towards welding, metal fab, and C.A.D associates at LBCC. He's a mcbride robotics mentor and plans to transfer into mechanical engineering, trying to be a prototype engineer, and learning html. He has been design lead and filled roles in his V5RC and VEX U career.</div>
</div>
</div>
<div class="team-item">
<div class="gradient-line" style="width:478px; left:671px; top:839px; transform:matrix(1,0,0,-1,0,0);"></div>
<div class="portrait" style="left:104px; top:557px; background-image:url('images/WINSTONLINE.png');"></div>
<div class="name" style="left:314px; top:568px;">WINSTON LIN</div>
<div class="role" style="left:314px; top:617px; width:835px;">
<div class="role-title">Brand Manager</div>
<div class="role-text">Winston is an aspiring mechanical engineer with 5 years of VEX Robotics experience under his belt despite being a rising high school senior. Throughout his career so far, he has garnered 13 total awards, 3 of which were at States-level competitions. Outside of robotics, he also dabbles in music composition, video editing, story writing, and water polo.</div>
</div>
</div>
<div class="team-item">
<div class="gradient-line" style="width:538px; left:611px; top:1089px; transform:matrix(1,0,0,-1,0,0);"></div>
<div class="portrait" style="left:184px; top:807px; background-image:url('images/MILESSANGER.png');"></div>
<div class="name" style="left:394px; top:818px;">MILES SANGER</div>
<div class="role" style="left:394px; top:867px; width:755px;">
<div class="role-title">Treasurer</div>
<div class="role-text">Miles, SCA’s treasurer and resident “vex lawyer” is also a part-time VEX referee, having formally competed over four years. Outside of VEX, he is pursuing a BFA in Game Development at the USC School of Cinematic Arts, and enjoys writing poetry, watching baseball, and riding public transportation.</div>
</div>
</div>
<div class="team-item">
<div class="portrait" style="left:104px; top:1057px; background-image:url('images/GLENBAUTISTA.png');"></div>
<div class="name" style="left:314px; top:1068px;">GLEN BAUTISTA</div>
<div class="role" style="left:349px; top:1134px; width:755px;">
<div class="role-title">Secretary</div>
<div class="role-text">Glen is a B.S. Computer Science major with plans to double major with a B.S. in General Applied Mathematics at UCR. He has experience in C++, HTML, and CSS programming, as well as robot construction. He competed in V5RC, VEX U, and FRC competitions from two high schools and one university.</div>
</div>
</div>
</div>
<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-left">
      <a class="logo-link" href="index.html" aria-label="Home">
        <div class="logo"></div>
      </a>
      <div>
        <p class="footer-copy">© 2025 SoCal Alliance Robotics. All rights reserved.</p>
        <p class="footer-sub">
          SoCal Alliance Robotics is a 501(c)(3) nonprofit public benefit organization based in California that provides
          robotics education to children of all communities. Contact socalalliancenonprofit@gmail.com for any other questions.
        </p>
      </div>
    </div>

    <div class="footer-center">
      <a href="support.html" aria-label="Donate now"><img class="donate-img" src="images/Donatewhite.png" alt="Donate Now"></a>
      <div class="footer-social" aria-label="Social links">
        <a href="https://www.instagram.com/socal_robotics_alliance" target="_blank" rel="noopener" aria-label="Instagram">
          <img src="images/SCA_INSTwhite.png" alt="Instagram"></a>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLScGGJLw2yV9QkPJk8zACn_MSqXgCfeg9FaOOrdy1TTCh5fFEg/viewform" target="_blank" rel="noopener" aria-label="Email">
          <img src="images/SCA_EMAILwhite.png" alt="Email"></a>
        <a href="https://www.tiktok.com/@sca_vexu" target="_blank" rel="noopener" aria-label="TikTok">
          <img src="images/SCA_TIKTOKwhite.png" alt="TikTok"></a>
        <a href="https://www.youtube.com/@SCA_ORG" target="_blank" rel="noopener" aria-label="YouTube">
          <img src="images/SCA_YOUTUBEwhite.png" alt="YouTube"></a>
      </div>
    </div>
  </div>
</footer>

<!-- Hide-on-scroll Nav -->
<!-- Desktop scaler + Mobile triangle layout (mobile-only fades) -->
<script>
  (function () {
    const container = document.querySelector('.triangle-container');
    if (!container) return;

    // 1) Wrap existing triangle content into a scaling stage (desktop/tablet)
    const stage = document.createElement('div');
    stage.className = 'triangle-stage';
    const kids = Array.from(container.childNodes);
    kids.forEach(n => stage.appendChild(n));
    container.appendChild(stage);

    const BASE_W = 900, BASE_H = 800; // Increased from 720 to 800
    Object.assign(stage.style, {
      width: BASE_W + 'px',
      height: BASE_H + 'px',
      position: 'absolute',
      left: '50%',
      top: '50%',
      transformOrigin: 'center center'
    });

    
function resizeDesktop() {
  const vw = Math.max(document.documentElement.clientWidth, window.innerWidth);
  const vh = Math.max(document.documentElement.clientHeight, window.innerHeight);
  const cw = container.clientWidth || BASE_W;

  // Fractional padding (total) that relaxes on wide screens
  const sideReserveFrac =
    vw >= 2560 ? 0.16 :
    vw >= 1920 ? 0.18 :
    vw >= 1600 ? 0.20 :
    vw >= 1366 ? 0.22 : 0.26; // total fraction reserved (both sides combined)

  // Always keep a hard minimum px on EACH side to prevent clipping
  const minSidePadPx = 120; // 96px each side
  const sidePad = Math.max(minSidePadPx, (cw * sideReserveFrac) / 2);
  let usableW = Math.max(0, cw - sidePad * 2);
  if (vw < 1366) {
    usableW = Math.max(0, cw - sidePad * 1.2);
  }
  const topReservePx = 16; const bottomReservePx = 12;

  const targetW = usableW; // no BASE_W clamp
  const targetH = Math.max(0, vh - (topReservePx + bottomReservePx));

  // Allow modest upscale on big screens but stay within height constraint
  const MAX_SCALE =
    vw >= 2560 ? 1.9 :
    vw >= 1920 ? 1.6 :
    vw >= 1600 ? 1.4 :
    vw >= 1366 ? 1.25 : 1.0;

  const s = Math.min(targetW / BASE_W, targetH / BASE_H, MAX_SCALE);

  stage.style.transform = 'translate(-50%, -50%) scale(' + s + ')';
  const yNudge = (vw >= 550 && vw <= 1122) ? 30 : 0;
  stage.style.top = `calc(50% + ${yNudge}px)`;
  const renderedH = BASE_H * s;
  const totalH    = Math.ceil(renderedH + topReservePx + bottomReservePx);
  container.style.height = totalH + 'px';

  const bg = document.querySelector('.bg-split');
  if (bg) bg.style.height = totalH + 'px';
}


    // 2) Build a clean mobile UI (≤480px)
    let mobileBuilt = false; // (disabled)
    let mRoot, mTopLabel, mLeft, mRight;

    function buildMobile() { /* disabled */ }

    function updateMobileTexts() {
      const top = (3 - rotation) % 3;
      const left = (4 - rotation) % 3;
      const right = (5 - rotation) % 3;
      const topRole = roles[top], leftRole = roles[left], rightRole = roles[right];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

 mTopLabel.textContent = topRole.label;
      
      // Update aria-labels with current state
      const arrows = mRoot.querySelectorAll('.arrow');
      arrows.forEach(btn => {
        const dir = btn.dataset.dir;
        const action = dir === '1' ? 'next' : 'previous';
        btn.setAttribute('aria-label', 
          `Navigate to ${action} triangle relationship. Currently viewing: ${topRole.label}`);
      });
      
      const leftKey  = leftRole.label.replace(' ','_');
      const rightKey = rightRole.label.replace(' ','_');
      mLeft.textContent  = topRole.descriptions[leftKey];
     
    // Keep triangle background static — no-op to prevent JS errors when called
    function updateBackgrounds(){ /* intentionally left blank */ }

 mRight.textContent = topRole.descriptions[rightKey];
    }
    window.updateMobileTexts = updateMobileTexts;

    // mobile fade helpers (only used on mobile)
    window.mobileFadeOut = function(){
      if (!mRoot) return;
      mTopLabel.classList.add('fading');
      mLeft.classList.add('fading');
      mRight.classList.add('fading');
    };
    window.mobileFadeIn = function(){
      if (!mRoot) return;
      requestAnimationFrame(()=>{
        mTopLabel.classList.remove('fading');
        mLeft.classList.remove('fading');
        mRight.classList.remove('fading');
      });
    };

    function onResize() {
      stage.style.display = 'block';
      resizeDesktop();
    }

    window.addEventListener('resize', onResize);
    onResize(); // initial
  })();
  </script>

<script>
(function(){
  let lastY = window.scrollY;
  const nav = document.querySelector('.top-bar');
  if (!nav) return;
  window.addEventListener('scroll', ()=>{
    const y = window.scrollY;
    nav.classList.toggle('hidden', y > lastY && y > 100);
    lastY = y;
  });
})();
</script>

<script>
(function(){
  const btn = document.querySelector('.nav-toggle');
  const nav = document.getElementById('site-nav');
  if (!btn || !nav) return;
  btn.addEventListener('click', function(){
    const open = this.getAttribute('aria-expanded') === 'true';
    this.setAttribute('aria-expanded', String(!open));
    nav.classList.toggle('open', !open);
  });
  nav.addEventListener('click', function(e){
    if (e.target.tagName === 'A') {
      btn.setAttribute('aria-expanded', 'false');
      nav.classList.remove('open');
    }
  });
})();
</script>

<script id="bg-size-by-container">
(function(){
  const container = document.querySelector('.triangle-container');
  const host = container ? container.closest('.integrated-approach') : null;
  const bg = host ? host.querySelector('.bg-split') : null;
  const fx = host ? host.querySelector('.background-effects') : null;
  if(!(container && host && bg)) return;

  function syncBg(){
    const rect = container.getBoundingClientRect();
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth);
    // Full height on >= 1123px, 66% & centered on thinner
    let h = rect.height;
    let top = 0;
    if (vw <= 1122) {
      h = Math.round(rect.height * 0.95);
      top = Math.max(0, Math.round((rect.height - h) / 2));
    }
    const offsetTop = 0; // align with container top (no black gap)
    bg.style.top = (offsetTop + top) + 'px';
    bg.style.height = h + 'px';
    if (fx) { fx.style.top = (offsetTop + top) + 'px'; fx.style.height = h + 'px'; }
  }
  new ResizeObserver(syncBg).observe(container);
  window.addEventListener('resize', syncBg, {passive:true});
  syncBg();
})();
</script>



<script id="flat-links-fix">
(function(){
  const map = {
    "/": "index.html",
    "/about/": "about.html",
    "/about": "about.html",
    "/vex/": "vex.html",
    "/vex": "vex.html",
    "/projects/": "projects.html",
    "/projects": "projects.html",
    "/support/": "support.html",
    "/support": "support.html"
  };
  function rewrite(href){
    if (!href) return null;
    // direct map
    if (map[href]) return map[href];
    // absolute URLs
    try{
      const u = new URL(href, location.href);
      if (map[u.pathname]) return map[u.pathname] + (u.hash || "");
    }catch(e){ /* ignore */ }
    return null;
  }
  // Fix existing anchors
  document.querySelectorAll('a[href]').forEach(a => {
    const fix = rewrite(a.getAttribute('href'));
    if (fix) a.setAttribute('href', fix);
  });
  // Intercept clicks just in case something sets href later
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[href]');
    if (!a) return;
    const fix = rewrite(a.getAttribute('href'));
    if (fix){
      e.preventDefault();
      window.location.href = fix;
    }
  }, true);
})();
</script>

</body>
</html>


