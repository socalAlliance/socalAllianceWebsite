<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- favicon -->
<link href="images/logo.png" rel="icon" type="image/png"/>
<!-- fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans&amp;family=Tilt+Warp&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-65LTDNTZ16"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-65LTDNTZ16');
  </script>
<link rel="stylesheet" href="styles/index.css"/>
<link rel="stylesheet" href="styles/nav.css"/>
<link rel="stylesheet" href="styles/footer.css"/>
</head>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-65LTDNTZ16"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-65LTDNTZ16');
</script>
<body>
<!-- NAV -->
<header class="top-bar sca-nav" role="navigation">
  <a class="logo-link" href="../index.html" aria-label="Home">
    <div class="logo"></div>
  </a>
<button type="button" class="nav-toggle" aria-label="Menu" aria-expanded="false" aria-controls="site-nav" style="position:relative;z-index:1000002;">
  <span class="bar"></span>
  <span class="bar"></span>
  <span class="bar"></span>
</button>
<div class="nav-backdrop" hidden></div>
<nav id="site-nav">
  <a href="../about/index.html">ABOUT US</a>
  <a href="../ourteam/index.html">OUR TEAM</a>
  <a href="../projects/index.html">PROJECTS</a>
  <a href="../support/index.html">SUPPORT US!</a>
</nav>
</header>
<!-- HERO 1 -->
<section class="hero-1 hero-split">
  <div class="hero-main">
    <div class="hero-text">FOUNDED BY COMPETITORS FOR COMPETITORS</div>

    <div class="subhead">
      <p>See how weâ€™re empowering the next generation of engineers through collaboration, resource-sharing, and mutual growth.</p>
      <a class="btn-img" href="../about/index.html">
        <img alt="Learn More" src="../images/Learnmore.png"/>
      </a>
    </div>
  </div>

  <aside class="discord-panel" aria-label="Newsletter updates">
    <h3>Newsletter</h3>
    <div id="discord-announcements" class="discord-announcements">Loadingâ€¦</div>
  </aside>

<script>
  function escapeHtml(str) {
    return String(str)
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  function stripMediaUrls(text) {
    return String(text)
      // remove direct image URLs
      .replace(/https?:\/\/\S+\.(png|jpe?g|gif|webp)(\?\S*)?/gi, "")
      // remove direct video URLs
      .replace(/https?:\/\/\S+\.(mp4|webm|mov)(\?\S*)?/gi, "")
      // remove common gif-host links that you embed anyway (Tenor/Giphy)
      .replace(/https?:\/\/(www\.)?(tenor\.com|giphy\.com)\S*/gi, "")
      .trim();
  }

  function linkify(text) {
    const urlRe = /(https?:\/\/[^\s]+)/g;

    return String(text).replace(urlRe, (url) => {
      // If URL looks like an image, do NOT turn it into a link
      if (/\.(png|jpe?g|gif|webp)(\?|$)/i.test(url)) {
        return url; // leave as plain text (or remove entirely if you prefer)
      }

      const safeUrl = escapeHtml(url);
      return `<a href="${safeUrl}" target="_blank" rel="noopener">${safeUrl}</a>`;
    });
  }

  async function loadDiscordAnnouncements() {
    const box = document.getElementById("discord-announcements");
    box.textContent = "Loadingâ€¦";

    try {
      // If the page is NOT being served by the Express app, call the API explicitly on :3000
      const usingExpress = window.location.port === "3000";
      const apiBase = window.location.origin;
      const apiUrl = `${apiBase}/api/announcements`;

      const r = await fetch(apiUrl, { cache: "no-store" });
      if (!r.ok) throw new Error(`API error ${r.status}`);

      const items = await r.json();

      if (!Array.isArray(items) || items.length === 0) {
        box.textContent = "No announcements yet.";
        return;
      }

      box.innerHTML = items.map(m => {
        const cleanText = stripMediaUrls(m.content || "");
        const content = linkify(escapeHtml(cleanText));

        // Your API timestamps have 6-digit fractional seconds; normalize for safe parsing
        const ts = String(m.timestamp || "").replace(/\.\d+/, "");
        const time = new Date(ts).toLocaleString();

        const media = Array.isArray(m.media) ? m.media : [];
        const mediaHtml = media.length ? `
          <div class="discord-images">
          ${media.map((m) => {
            const safe = escapeHtml(m.url);

            if (m.type === "file") {
              const fileName = escapeHtml(m.name || m.url.split("/").pop() || "Download file");
              return `
                <a class="discord-file" href="${safe}" target="_blank" rel="noopener">
                  ðŸ“„ ${fileName}
                </a>
              `;
            }

            // VIDEOS
            if (m.type === "video") {
              const isGifVideo = /\.(mp4|webm)/i.test(safe) &&
                                /(tenor|giphy|discord)/i.test(safe);

              // Treat "GIF videos" like GIFs
              if (isGifVideo) {
                return `
                  <video
                    class="discord-gif-video"
                    src="${safe}"
                    autoplay
                    loop
                    muted
                    playsinline>
                  </video>
                `;
              }

              // Normal videos
              return `
                <video
                  class="discord-video"
                  src="${safe}"
                  controls
                  playsinline
                  preload="metadata">
                </video>
              `;
            }

            // GIFS â†’ real GIF behavior (no video tag)
            if (m.type === "gif") {
              return `
                <img
                  class="discord-gif"
                  src="${safe}"
                  loading="lazy"
                  alt="">
              `;
            }

            // STATIC IMAGES
            return `
              <img
                class="discord-img"
                src="${safe}"
                loading="lazy"
                alt="">
            `;
          }).join("")}
          </div>
        ` : "";

        return `
          <div class="discord-post">
            ${content ? `<p class="discord-text">${content}</p>` : ""}
            ${mediaHtml}
            <small class="discord-time">${escapeHtml(time)}</small>
          </div>
        `;
      }).join("");

    } catch (e) {
      box.textContent = "Could not load announcements.";
      console.error("Announcements load failed:", e);
    }
  }

  loadDiscordAnnouncements();
</script>

</section>
<div class="stats-gradient"></div>
<!-- STATS BAR IMAGE -->
<div style="text-align:center; margin:4rem 0;">
<a class="stats-btn" href="../projects/index.html">
<img alt="See our projects" src="../images/Statsbar.png"/>
</a>
</div>
<div class="stats-gradient"></div>
<!-- HERO 2 + ABOUT -->
<section class="hero-2">
<div class="about">
<div class="inner">
<h2>SOCAL ALLIANCE</h2>
<p>Our organization was founded in 2022 after a seemingly inconsequential act: one team sharing a few spare parts with another during a critical point in a competition. What initially appeared to be a simple act of generosity became the foundation for a growing community grounded in respect and collaboration.</p>
<p>Now over 180 members strong, SoCal Alliance unites passionate VEX Robotics teams and individuals committed to high-level performance, shared learning, and collective innovationâ€“all while supporting one another along the way.</p>
<p>Our aim is to make VEX knowledge easier to access. Most of us learned through other students, so we share what weâ€™ve learned to make robotics more welcoming, inclusive, and educational for everyone.</p>
<p>Today, we are proud to be part of the SCA Nonprofit Initiative, and we am excited to explore new ways to uplift and empower teams within and beyond our network.</p>
</section>
<div class="stats-gradient"></div>
<section class="sponsor-carousel-section">
<h2 class="carousel-title">OUR PARTNERS</h2>
<div class="sponsor-marquee">
  <div class="sponsor-viewport">
    <ul class="marquee" id="sponsorTrack">
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<!-- Repeats go here-->
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-pink" href="https://polymaker.com/" rel="noopener" target="_blank">
<img alt="Polymaker" src="images/Polymaker-Logo.png"/>
</a>
</li>
<li>
<a class="sponsor-logo tier-gold" href="https://mcbride.lbschools.net" rel="noopener" target="_blank">
<img alt="McBride" src="images/McBride-Logo.png"/>
</a>
</li>
    </ul>
    </div>
  </div>
</section>
<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-left">
      <a class="logo-link" href="../index.html" aria-label="Home">
        <div class="logo"></div>
      </a>
      <div>
        <p class="footer-copy">Â© 2025 SOCAL ALLIANCE ROBOTICS. ALL RIGHTS RESERVED.</p>
        <p class="footer-sub">
          SoCal Alliance Robotics is a 501(c)(3) nonprofit public benefit organization based in California that provides robotics education to children of all communities.
        </p>
      </div>
    </div>

    <div class="footer-center">
      <a href="support/index.html" aria-label="Donate now"><img class="donate-img" src="images/Donatewhite.png" alt="Donate Now"></a>
      <div class="footer-social" aria-label="Social links">
        <a href="https://www.instagram.com/socal_robotics_alliance" target="_blank" rel="noopener" aria-label="Instagram">
          <img src="images/SCA_INSTwhite.png" alt="Instagram"></a>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLScGGJLw2yV9QkPJk8zACn_MSqXgCfeg9FaOOrdy1TTCh5fFEg/viewform" target="_blank" rel="noopener" aria-label="Email">
          <img src="images/SCA_EMAILwhite.png" alt="Email"></a>
        <a href="https://www.tiktok.com/@sca_vexu" target="_blank" rel="noopener" aria-label="TikTok">
          <img src="images/SCA_TIKTOKwhite.png" alt="TikTok"></a>
        <a href="https://www.youtube.com/@SCA_ORG" target="_blank" rel="noopener" aria-label="YouTube">
          <img src="images/SCA_YOUTUBEwhite.png" alt="YouTube"></a>
      </div>
    </div>
  </div>
</footer>

<!-- (removed unused carousel-track script) -->

<script>
    (function(){
      let lastY = window.scrollY;
      const nav = document.querySelector('.top-bar');
      window.addEventListener('scroll', () => {
        const y = window.scrollY;
        nav.classList.toggle('hidden', y > lastY && y > 100);
        lastY = y;
      });
    })();
</script>

<!-- removed duplicate nav toggle script -->

<script>
// Smooth, seamless sponsor ticker (3 logos visible), no cropping on hover
(function(){
  const track = document.getElementById('sponsorTrack');
  if (!track) return;
  const viewport = track.parentElement;
  const getGap = () => parseFloat(getComputedStyle(track).gap) || 24;
  const speed = 60; // pixels per second
  let paused = false;

  // Ensure we have enough children so the loop is seamless.
  function ensureFill(){
    const needWidth = viewport.offsetWidth * 2;
    // Clone until the track is at least 2x viewport width
    while (track.scrollWidth < needWidth && track.children.length < 200) {
      const clones = Array.from(track.children).map(n => n.cloneNode(true));
      clones.forEach(c => track.appendChild(c));
    }
  }
  ensureFill();
  viewport.addEventListener('mouseenter', ()=> paused = true);
  viewport.addEventListener('mouseleave', ()=> paused = false);
  // Recalculate on resize
  let resizeTO;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTO);
    resizeTO = setTimeout(() => {
      // Remove all but first "page" then refill
      const originalCount = Math.max(1, Math.floor(track.children.length / 2));
      while (track.children.length > originalCount) track.removeChild(track.lastElementChild);
      track.style.transform = 'translateX(0px)';
      x = 0;
      ensureFill();
  viewport.addEventListener('mouseenter', ()=> paused = true);
  viewport.addEventListener('mouseleave', ()=> paused = false);
    }, 150);
  });

  let x = 0;
  let last = performance.now();
  function loop(now){
    const dt = (now - last) / 1000;
    last = now;
    if (!paused) { x -= speed * dt; }

    // When the first child fully exits left, move it to the end
    const first = track.firstElementChild;
    if (first) {
      const firstRect = first.getBoundingClientRect();
      const viewportRect = viewport.getBoundingClientRect();
      const step = firstRect.width + getGap();
      if (-x >= step) {
        track.appendChild(first);
        x += step;
      }
    }
    track.style.transform = `translate3d(${x}px,0,0)`;
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();
</script>

<script>
(function(){
  const header   = document.querySelector('.sca-nav');
  const btn      = header && header.querySelector('.nav-toggle');
  const nav      = header && header.querySelector('#site-nav');
  const backdrop = header && header.querySelector('.nav-backdrop');
  if (!header || !btn || !nav || !backdrop) return;

  function placeMenu(){
    const rect = header.getBoundingClientRect();
    document.documentElement.style.setProperty('--sca-nav-bottom', Math.max(0, rect.bottom) + 'px');
  }

  function openMenu(){
    placeMenu();
    nav.classList.add('open');
    btn.setAttribute('aria-expanded','true');
    backdrop.hidden = false;
    document.body.classList.add('menu-open');
  }
  function closeMenu(){
    nav.classList.remove('open');
    btn.setAttribute('aria-expanded','false');
    backdrop.hidden = true;
    document.body.classList.remove('menu-open');
  }

  btn.addEventListener('click', () => nav.classList.contains('open') ? closeMenu() : openMenu());
  backdrop.addEventListener('click', closeMenu);
  nav.addEventListener('click', e => { if (e.target.tagName === 'A') closeMenu(); });

  // keep dropdown anchored under the sticky header on resize/scroll
  window.addEventListener('resize', placeMenu, {passive:true});
  window.addEventListener('scroll', placeMenu,  {passive:true});
  placeMenu();
})();
</script>

</body>
</html>
